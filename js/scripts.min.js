function dateValidation(e){const t=new Date;return new Date(e)<t?{result:!1,message:"Date should be in the future"}:{result:!0}}function setError(e,t){$("#"+e).addClass("error"),console.error("Error:",t.message)}function clearError(e){$("#"+e).removeClass("error")}function hideLoader(){$(".fake-loader").fadeOut(500)}function showLoader(){$(".fake-loader").fadeIn(500)}$(document).ready((function(){$(".content-info__button").on("click",(function(){$(".content-info__more-info").slideToggle("slow"),$(".content-info__arrow").toggleClass("active")})),$(".select").on("click",".select__item",(function(e){e.preventDefault();const t=$(this).attr("class");t.includes("remembered-card")?($(".modal--remembered-card").addClass("active"),$(".modal--card-list").removeClass("active")):t.includes("card-input")?($(".modal--card-input").addClass("active"),$(".modal--card-list").removeClass("active")):$(".modal--card-list").addClass("active"),$(".overlay, .select__icon").addClass("active")})),$(".overlay").on("click",(function(){$(".modal, .overlay, .select__icon").removeClass("active")})),$(".language").on("click",(function(){$(".language__sublist, .language__list, .language__icon").toggleClass("active")}));const e=$(".sms-content__input"),t=$("form").find("[name^=num]");e.on({input:function(){const t=e.index(this)+1;this.value&&t<e.length&&e.eq(t).focus()},keydown:function(t){const a=e.index(this);8===t.which&&!this.value&&a>0&&e.eq(a-1).focus(),8!==t.which&&46!==t.which&&(t.which<48||t.which>57)&&t.preventDefault()}}),t.slice(1).on("focus",(function(e){const a=t.index(this),c=t.eq(a-1);c.val().trim()||(e.preventDefault(),c.focus())})),$(".select__item").click((function(e){e.preventDefault()}));const a=$("#card-phone"),c=$(".sms-content__text");let o="+7";s(),a.val(o);const n=o.slice(2,5),i=o.slice(-2);function s(){const e=o.slice(2,5),t=o.slice(-2);$("#card-phone-sms").val(o),c.eq(1).text(`+7 ${e} *** ** ${t}`)}function r(e,t,a){e.on("input",(function(){let c=$(this).val();c=c.replace(t,""),"card-number"===e.attr("id")&&(c=c.replace(/\D/g,"").replace(/(\d{4})/g,"$1 ").trim()),"card-name"===e.attr("id")&&(c=c.toUpperCase()),"card-date"===e.attr("id")&&(c=c.replace(/[^0-9]/g,"").replace(/(\d{2})(\d{2})/,"$1/$2").slice(0,5),c.length>=7&&!dateValidation(c).result?setError("card-date",{message:dateValidation(c).message}):clearError("card-date")),c.length>a&&(c=c.slice(0,a)),$(this).val(c)}))}c.eq(1).text(`+7 ${n} *** ** ${i}`),a.on("keydown",(function(e){("Backspace"===e.key||"Delete"===e.key)&&a[0].selectionStart<=2&&e.preventDefault()})),a.on("input",(function(){let e=a.val();e.startsWith("+7")||(a.val("+7"+e.substring(2)),e=a.val()),e.length>12&&a.val(e.slice(0,12)),o=a.val(),s()})),r($("#card-number"),/[^0-9]/g,19),r($("#card-cvv"),/[^0-9]/g,3),r($("#card-cvv-remembered-card"),/[^0-9]/g,3),r($("#card-date"),/[^0-9/]/g,5),r($("#card-name"),/[^а-яА-Яa-zA-Z\s]/g,30),$("form.card").submit((function(e){const t={"card-number":16,"card-cvv":3,"card-date":4};let a=!0;for(const e in t){$("#"+e).val().trim().length<t[e]&&($("#"+e).addClass("error"),a=!1)}a||e.preventDefault()})),$("#button-sms").click((function(e){$(this).closest("form.card")[0].checkValidity()&&(e.preventDefault(),showLoader(),setTimeout((function(){$("#confirm").show(),$("#try-payment").hide(),hideLoader()}),500))})),$("#balanceForm").show(),$("#cardForm").hide(),$("#cardTab").click((function(){$("#form-balance").show(),$("#form-card").hide(),$("#form-sms").hide(),$(this).addClass("active"),$("#balanceTab").removeClass("active")})),$("#balanceTab").click((function(){$("#form-card").show(),$("#form-balance").hide(),$(this).addClass("active"),$("#cardTab").removeClass("active")})),$("#card-phone-submit").on("click",(function(e){e.preventDefault(),showLoader(),setTimeout((function(){$("#form-sms").show(),$("#form-card").hide(),hideLoader()}),500)})),$("#button-confirm").click((function(e){$(this).closest("form.card")[0].checkValidity()&&(e.preventDefault(),showLoader(),setTimeout((function(){$("#confirm").hide(),$("#success").show(),hideLoader()}),500))})),$("#button-sms").click((function(e){$(this).closest("form.card")[0].checkValidity()&&(e.preventDefault(),showLoader(),setTimeout((function(){$("#success").show(),$("#confirm").hide(),$("#try-payment").hide(),hideLoader()}),500))})),$("#button-cvc-code").click((function(e){$(this).closest("form.card")[0].checkValidity()&&(e.preventDefault(),showLoader(),setTimeout((function(){$("#confirm").show(),$("#try-payment").hide(),$(".modal, .overlay, .select__icon").removeClass("active"),hideLoader()}),500))})),$("#button-card-payment").click((function(e){$(this).closest("form.card")[0].checkValidity()&&(e.preventDefault(),showLoader(),setTimeout((function(){$("#confirm").show(),$("#try-payment").hide(),$(".modal, .overlay, .select__icon").removeClass("active"),hideLoader()}),500))}))}));